<!DOCTYPE html>
<html lang="en" data-ng-app="BeMEAN">
	<head>
		<meta charset="utf-8">
		<title>Aula 06 - angular</title>
		<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/css/materialize.min.css">
		<style type="text/css">
			.wrapper {
				max-width: 600px;
				margin: 0 auto;
			}
		</style>
	</head>

	<body data-ng-controller="UserController as User">

		<div class="row wrapper">
			<h1>{{ User.titulo }}</h1>

			<p class="col s12">
				<label>Name:
					<input type="text" data-ng-model="form.User.name">
				</label>
				<br>
				<label>Email:
					<input type="email" data-ng-model="form.User.email">
				</label>
			</p>

			<button data-ng-click="User.add(form.User)" class="btn btn-large red waves-effect waves-light col s12">ADD</button>

			<span data-ng-init="predicate = 'name'; reverse = false"></span>

			<table>
				
				<thead>
					<tr>
						<th colspan="{{ User.users.keyslength }}">
							<label>Busca:
								<input type="text" ng-model="searchUser">
							</label>
						</th>
					</tr>
					<tr>
						<th ng-repeat="(key, value) in User.users[0]">{{ key }}</th>
					</tr>					
				</thead>

				<tbody>
					<tr ng-repeat="user in User.users | orderBy:predicate:reverse | filter:searchUser">
						<td ng-repeat="(key, value) in user">{{ value }}</td>
						<td><button data-ng-click="User.removeByEmail(this.user.email)" class="btn btn-large red waves-effect waves-light col s12" type="submit" name="action">DELETE</button></td>
					</tr>
				</tbody>

			</table>
			

		</div>


		<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.2/angular.min.js"></script>

		<script type="text/javascript">
			angular.module("BeMEAN",[])
				.filter("searchUser", function(){
					return function(text) {

					}
				})
				.controller("UserController", UserController);

			function UserController(){
				var vm = this;

				vm.titulo = "Lista de Usu√°rios";				

				vm.users = [
					{name: "Ju Dantas", email: "juds@gmail.com"},
					{name: "Cicraninho", email: "cicicranono@asdeasdasd.com"},
					{name: "Fulano", email: "fulanoo123@lalala.com"}
				];
				vm.users.keyslength = Object.keys(vm.users[0]).length;
			}

		</script>

	</body>
</html>